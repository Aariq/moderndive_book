<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>An Introduction to Statistical and Data Sciences via R</title>
  <meta name="description" content="An open-source and fully-reproducible electronic textbook bridging the gap between traditional introductory statistics and data science courses.">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="An Introduction to Statistical and Data Sciences via R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://moderndive.com/" />
  <meta property="og:image" content="http://moderndive.com/images/logos/book_cover.png" />
  <meta property="og:description" content="An open-source and fully-reproducible electronic textbook bridging the gap between traditional introductory statistics and data science courses." />
  <meta name="github-repo" content="moderndive/moderndive_book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="An Introduction to Statistical and Data Sciences via R" />
  
  <meta name="twitter:description" content="An open-source and fully-reproducible electronic textbook bridging the gap between traditional introductory statistics and data science courses." />
  <meta name="twitter:image" content="http://moderndive.com/images/logos/book_cover.png" />

<meta name="author" content="Chester Ismay and Albert Y. Kim">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="images/logos/favicons/apple-touch-icon.png">
  <link rel="shortcut icon" href="images/logos/favicons/favicon.ico" type="image/x-icon">
<link rel="prev" href="index.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89938436-1', 'auto');
  ga('send', 'pageview');

</script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#sec:intro-for-students"><i class="fa fa-check"></i><b>1.1</b> Introduction for students</a><ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#subsec:learning-goals"><i class="fa fa-check"></i><b>1.1.1</b> What you will learn from this book</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#subsec:pipeline"><i class="fa fa-check"></i><b>1.1.2</b> Data/science pipeline</a></li>
<li class="chapter" data-level="1.1.3" data-path="index.html"><a href="index.html#subsec:reproducible"><i class="fa fa-check"></i><b>1.1.3</b> Reproducible research</a></li>
<li class="chapter" data-level="1.1.4" data-path="index.html"><a href="index.html#final-note-for-students"><i class="fa fa-check"></i><b>1.1.4</b> Final note for students</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#sec:intro-instructors"><i class="fa fa-check"></i><b>1.2</b> Introduction for instructors</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#who-is-this-book-for"><i class="fa fa-check"></i><b>1.2.1</b> Who is this book for?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#sec:connect-contribute"><i class="fa fa-check"></i><b>1.3</b> Connect and contribute</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#sec:about-book"><i class="fa fa-check"></i><b>1.4</b> About this book</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#sec:about-authors"><i class="fa fa-check"></i><b>1.5</b> About the authors</a></li>
</ul></li>
<li class="part"><span><b>I Inference</b></span></li>
<li class="chapter" data-level="2" data-path="2-sampling.html"><a href="2-sampling.html"><i class="fa fa-check"></i><b>2</b> Sampling</a><ul>
<li class="chapter" data-level="" data-path="2-sampling.html"><a href="2-sampling.html#needed-packages"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="2.1" data-path="2-sampling.html"><a href="2-sampling.html#terminology"><i class="fa fa-check"></i><b>2.1</b> Terminology</a></li>
<li class="chapter" data-level="2.2" data-path="2-sampling.html"><a href="2-sampling.html#in-real-life-sampling"><i class="fa fa-check"></i><b>2.2</b> “In real life” sampling</a></li>
<li class="chapter" data-level="2.3" data-path="2-sampling.html"><a href="2-sampling.html#virtual-sampling"><i class="fa fa-check"></i><b>2.3</b> Virtual sampling</a></li>
<li class="chapter" data-level="2.4" data-path="2-sampling.html"><a href="2-sampling.html#extreme-virtual-sampling"><i class="fa fa-check"></i><b>2.4</b> “Extreme” virtual sampling</a></li>
<li class="chapter" data-level="2.5" data-path="2-sampling.html"><a href="2-sampling.html#central-limit-theorem"><i class="fa fa-check"></i><b>2.5</b> Central Limit Theorem</a></li>
<li class="chapter" data-level="2.6" data-path="2-sampling.html"><a href="2-sampling.html#conclusion"><i class="fa fa-check"></i><b>2.6</b> Conclusion</a><ul>
<li class="chapter" data-level="2.6.1" data-path="2-sampling.html"><a href="2-sampling.html#whats-to-come"><i class="fa fa-check"></i><b>2.6.1</b> What’s to come?</a></li>
<li class="chapter" data-level="2.6.2" data-path="2-sampling.html"><a href="2-sampling.html#script-of-r-code"><i class="fa fa-check"></i><b>2.6.2</b> Script of R code</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to Statistical and Data Sciences via R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<html>
<img src='http://moderndive.com/images/logos/wide_format.png' alt="ModernDive">
</html>
<div id="sampling" class="section level1">
<h1><span class="header-section-number">2</span> Sampling</h1>
<p>In this chapter we kick off the third and final segment of this book, statistical inference, by learning about <strong>sampling</strong>. The concepts behind sampling form the basis of confidence intervals and hypothesis testing, which we’ll cover in Chapters <a href="#ci"><strong>??</strong></a> and <a href="#hypo"><strong>??</strong></a> respectively. We will see that the tools that you learned in the data science segment of this book (data visualization, “tidy” data format, and data wrangling) will also play an important role here in the development of your understanding. As mentioned before, the concepts throughout this text all build into a culmination allowing you to “think with data.”</p>
<div id="needed-packages" class="section level3 unnumbered">
<h3>Needed packages</h3>
<p>Let’s load all the packages needed for this chapter (this assumes you’ve already installed them). If needed, read Section <a href="#packages"><strong>??</strong></a> for information on how to install and load R packages.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
<span class="kw">library</span>(moderndive)</code></pre></div>
</div>
<div id="terminology" class="section level2">
<h2><span class="header-section-number">2.1</span> Terminology</h2>
<p>Before we can start studying sampling, we need to define some terminology.</p>
<ol style="list-style-type: decimal">
<li><strong>Population</strong>: The population is the (usually) large pool of observational units that we are interested in.</li>
<li><strong>Population parameter</strong>: A population parameter is a numerical quantify of interest about a population, such as a proportion or a mean.</li>
<li><strong>Census</strong>: An enumeration of every member of a population. Ex: the Decennial United States census.</li>
<li><strong>Sample</strong>: A sample is a smaller collection of observational units that is selected from the population. We would like to <em>infer</em> about the population based on this sample.</li>
<li><strong>Sampling</strong>: Sampling refers to the process of selecting observations from a population. There are both random and non-random ways this can be done.</li>
<li><strong>Representative sampling</strong>: A sample is said be a representative sample if the characteristics of observational units selected are a good approximation of the characteristics from the original population.</li>
<li><strong>Generalizability</strong>: Generalizability refers to the largest group in which it makes sense to make inferences about from the sample collected. This is directly related to how the sample was selected.</li>
<li><strong>Bias</strong>: Bias corresponds to a favoring of one group in a population over another group. Or put differently, when certain members of a population have a higher chance of being included in a sample than others.</li>
<li><strong>Statistic</strong>: A statistic is a calculation based on one or more variables measured in the sample.</li>
<li><strong>Point estimates/sample statistics</strong>: These are statistics, computed based on a sample, that estimate an unknow population parameter.</li>
</ol>
</div>
<div id="in-real-life-sampling" class="section level2">
<h2><span class="header-section-number">2.2</span> “In real life” sampling</h2>
<p>Consider the following “sampling bowl” consisting of 2400 balls, which are either red, white, or green. We are interested in knowing the proportion of balls in the sampling bowl that are red, but are too lazy to count the number of balls out of 2400 that are red. In other words, we’re not interested in conducting a census. So instead we attempt to estimate the proportion red by using the sampling “shovel” to extract a sample of size <span class="math inline">\(n\)</span> = 50 balls, and count the proportion of these that are red. However, before we extracted a sample using this shovel, we made sure to give the balls a good stir, ensuring we have random sampling.</p>
<div class="figure" style="text-align: center"><span id="fig:tub1"></span>
<img src="images/sampling_bowl.jpeg" alt="Sampling from a sampling bowl" width="\textwidth" />
<p class="caption">
Figure 2.1: Sampling from a sampling bowl
</p>
</div>
<p>We put students to the task of estimating the proprotion of balls in the tub that are red, because frankly, we’re too lazy to do so ourselves! Groups of students “in real life” took random samples of size <span class="math inline">\(n\)</span> = 50. Thank you Niko, Sophie, Caitlin, Yaw, and Drew for doing double duty! In other, we have 10 samples of size <span class="math inline">\(n\)</span> = 50:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bowl_samples</code></pre></div>
<table>
<caption><span id="tab:students">Table 2.1: </span>In real life: 10 samples of size 50</caption>
<thead>
<tr class="header">
<th align="left">group</th>
<th align="right">red</th>
<th align="right">white</th>
<th align="right">green</th>
<th align="right">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Kathleen and Max</td>
<td align="right">18</td>
<td align="right">32</td>
<td align="right">0</td>
<td align="right">50</td>
</tr>
<tr class="even">
<td align="left">Sean, Jack, and CJ</td>
<td align="right">18</td>
<td align="right">32</td>
<td align="right">0</td>
<td align="right">50</td>
</tr>
<tr class="odd">
<td align="left">X and Judy</td>
<td align="right">22</td>
<td align="right">28</td>
<td align="right">0</td>
<td align="right">50</td>
</tr>
<tr class="even">
<td align="left">James and Jacob</td>
<td align="right">21</td>
<td align="right">29</td>
<td align="right">0</td>
<td align="right">50</td>
</tr>
<tr class="odd">
<td align="left">Hannah and Siya</td>
<td align="right">16</td>
<td align="right">34</td>
<td align="right">0</td>
<td align="right">50</td>
</tr>
<tr class="even">
<td align="left">Niko, Sophie, and Caitlin</td>
<td align="right">14</td>
<td align="right">36</td>
<td align="right">0</td>
<td align="right">50</td>
</tr>
<tr class="odd">
<td align="left">Niko, Sophie, and Caitlin</td>
<td align="right">19</td>
<td align="right">31</td>
<td align="right">0</td>
<td align="right">50</td>
</tr>
<tr class="even">
<td align="left">Aleja and Ray</td>
<td align="right">20</td>
<td align="right">30</td>
<td align="right">0</td>
<td align="right">50</td>
</tr>
<tr class="odd">
<td align="left">Yaw and Drew</td>
<td align="right">16</td>
<td align="right">34</td>
<td align="right">0</td>
<td align="right">50</td>
</tr>
<tr class="even">
<td align="left">Yaw and Drew</td>
<td align="right">21</td>
<td align="right">29</td>
<td align="right">0</td>
<td align="right">50</td>
</tr>
</tbody>
</table>
<p>For each sample of size <span class="math inline">\(n\)</span> = 50, what is the sample proportion red? In other words, what are the point estimates <span class="math inline">\(\widehat{p}\)</span> based on a sample of size <span class="math inline">\(n\)</span> = 50 of <span class="math inline">\(p\)</span>, the true proportion of balls in the tub that is red? We can easily compute this using the <code>mutate()</code> function from the <code>dplyr</code> package we studied extensively in Chapter <a href="#wrangling"><strong>??</strong></a>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bowl_samples &lt;-<span class="st"> </span>bowl_samples <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop_red =</span> red<span class="op">/</span>n) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(group, prop_red)
bowl_samples</code></pre></div>
<table>
<caption><span id="tab:sample-prop-red">Table 2.2: </span>In real life: 10 sample proportions red based on samples of size 50</caption>
<thead>
<tr class="header">
<th align="left">group</th>
<th align="right">prop_red</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Kathleen and Max</td>
<td align="right">0.36</td>
</tr>
<tr class="even">
<td align="left">Sean, Jack, and CJ</td>
<td align="right">0.36</td>
</tr>
<tr class="odd">
<td align="left">X and Judy</td>
<td align="right">0.44</td>
</tr>
<tr class="even">
<td align="left">James and Jacob</td>
<td align="right">0.42</td>
</tr>
<tr class="odd">
<td align="left">Hannah and Siya</td>
<td align="right">0.32</td>
</tr>
<tr class="even">
<td align="left">Niko, Sophie, and Caitlin</td>
<td align="right">0.28</td>
</tr>
<tr class="odd">
<td align="left">Niko, Sophie, and Caitlin</td>
<td align="right">0.38</td>
</tr>
<tr class="even">
<td align="left">Aleja and Ray</td>
<td align="right">0.40</td>
</tr>
<tr class="odd">
<td align="left">Yaw and Drew</td>
<td align="right">0.32</td>
</tr>
<tr class="even">
<td align="left">Yaw and Drew</td>
<td align="right">0.42</td>
</tr>
</tbody>
</table>
<p>We see that one group got a sample proportion <span class="math inline">\(\widehat{p}\)</span> as low as 28% while another got a sample proportion <span class="math inline">\(\widehat{p}\)</span> as high as 0.44. Why are these different? Why is there this variation? Because of <em>sampling variability</em>! Sampling is inherently random, so for a sample of <span class="math inline">\(n\)</span> = 50 balls, we’ll never get exactly the same number of red balls.</p>
<p>Let’s visualize this using our data visualization skills that you honed in Chapter <a href="#viz"><strong>??</strong></a>! Let’s investigate the distribution of these 10 sample proportion red <span class="math inline">\(\widehat{p}\)</span> each based on a random sample of size <span class="math inline">\(n\)</span> = 50 using a histogram, an appropriate visualization since <code>prop_red</code> is numerical:</p>
<div class="figure" style="text-align: center"><span id="fig:sampling-distribution-1"></span>
<img src="ismaykim_files/figure-html/sampling-distribution-1-1.png" alt="In real life: 10 sample proportions red based on 10 samples of size 50" width="\textwidth" />
<p class="caption">
Figure 2.2: In real life: 10 sample proportions red based on 10 samples of size 50
</p>
</div>
<p>Let’s as ourselves some questions:</p>
<ol style="list-style-type: decimal">
<li>Where is the histogram centered?</li>
<li>What is the spread of this histogram?</li>
</ol>
<p>Recall from Section <a href="#summarize"><strong>??</strong></a> the mean and the standard deviation are two summary statistics that would answer this question:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bowl_samples <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(prop_red), <span class="dt">sd =</span> <span class="kw">sd</span>(prop_red))</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">mean</th>
<th align="right">sd</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0.37</td>
<td align="right">0.052</td>
</tr>
</tbody>
</table>
<p>What you have just unpacked are some very deep and very subtle concepts in statistical inference:</p>
<ol style="list-style-type: decimal">
<li>The histogram in Figure <a href="2-sampling.html#fig:sampling-distribution-1">2.2</a> is called the <strong>sampling distribution</strong> of <span class="math inline">\(\widehat{p}\)</span> based on samples of size <span class="math inline">\(n=50\)</span>. It describes how values of the sample proportion red will vary from sample-to-sample due to the aforementioned <strong>sampling variability</strong>.</li>
<li>If the sampling is done in an unbiased and random fashion, in other words we made sure to stir the bowl before we sampled, then the sampling distribution will be guaranteed to be centered at the true unknown population proportion red, or in other words the true number of balls out of 2400 that are red. In this case, these 10 values of <span class="math inline">\(\widehat{p}\)</span> are centered at 0.37</li>
<li>The spread of this histogram, as quantified by the standard devation of 0.0519, is called the <strong>standard error</strong>. It quantifies the variability of our estimates <span class="math inline">\(\widehat{p}\)</span>.</li>
</ol>
</div>
<div id="virtual-sampling" class="section level2">
<h2><span class="header-section-number">2.3</span> Virtual sampling</h2>
<p>In the <code>moderndive</code> package, we’ve included a data frame called <code>bowl</code> that actually is a virtual version of the above sampling bowl in Figure <a href="2-sampling.html#fig:tub1">2.1</a> with all 2400 balls! While we present a snap shot of the first 10 rows of <code>bowl</code> below, you should <code>View()</code> it in RStudio to convince yourselves that <code>bowl</code> is indeed a virtual version of the image above.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(bowl)</code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-9">Table 2.3: </span>First 10 balls in virtual sampling bowl</caption>
<thead>
<tr class="header">
<th align="right">ball_ID</th>
<th align="right">color</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">white</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">white</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">white</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">red</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">white</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">white</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="right">red</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="right">white</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="right">red</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="right">white</td>
</tr>
</tbody>
</table>
<p>Note that the balls are not actually marked with numbers; the variable <code>ball_ID</code> are merely used as an identification variable for each row of <code>bowl</code> (recall our previous discussion on identification variables in Subsection <a href="#identification-vs-measurement"><strong>??</strong></a> in “Data Tidying” Chapter <a href="#tidy"><strong>??</strong></a>.</p>
<p>Let’s replicate what the groups of students did above but <em>virtually</em>. We are going to now simulate using a computer what our students did by hand in Table <a href="2-sampling.html#tab:students">2.1</a> using the <code>rep_sample_n()</code> function which the <code>moderndive</code> package borrows from the <code>infer</code> package we’ll see shortly. The <code>rep_sample_n()</code> function takes the following arguments:</p>
<ul>
<li><code>tbl</code>: a data frame representing the population you wish to infer about. We’ll set this to <code>bowl</code>, since this is the (virtual) population of interest.</li>
<li><code>size</code>: the sample size <span class="math inline">\(n\)</span> in question. We’ll set this to 50, micking the number of slots in the sampling “shovel” in the image in Figure <a href="2-sampling.html#fig:tub1">2.1</a>.</li>
<li><code>replace</code>: A logical <code>TRUE/FALSE</code> value indicating whether or not to put each ball back into the bowl after we’ve sampled it. In our case, we’ll set this to <code>FALSE</code> since we are sampling 50 balls at once, not 50 single balls individually.</li>
<li><code>reps</code>: the number of samples of size <span class="math inline">\(n\)</span> = <code>size</code> to extract. We’ll set this to 10, mimicking the data we have in Table <a href="2-sampling.html#tab:students">2.1</a>.</li>
</ul>
<p>Let’s apply this function to mimick our situation above and <code>View()</code> the data. The output is rather large, so we won’t display it below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">all_samples &lt;-<span class="st"> </span><span class="kw">rep_sample_n</span>(bowl, <span class="dt">size =</span> <span class="dv">50</span>, <span class="dt">reps =</span> <span class="dv">10</span>)
<span class="kw">View</span>(all_samples)</code></pre></div>
<p>Scroll through the spreadsheet viewer, you’ll notice</p>
<ol style="list-style-type: decimal">
<li>The values of <code>replicate</code> (<code>1</code> through <code>10</code>) come in bunches of 50, representing the 10 groups respective samples of size <span class="math inline">\(n\)</span> = 50.</li>
<li>The <code>ball_ID</code> identification variable is all over the place, suggesting we really are (virtual) randomly sampling balls.</li>
<li><code>color</code> represents the color of each of the virtually sampled balls.</li>
</ol>
<p>What is the proportion red for each group as denoted by the <code>replicate</code> variable? Again, let’s leverage your data ninja skills from Chapter <a href="#wrangling"><strong>??</strong></a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bowl_samples_virtual &lt;-<span class="st"> </span>all_samples <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">is_red =</span> color <span class="op">==</span><span class="st"> &quot;red&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(replicate) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">prop_red =</span> <span class="kw">mean</span>(is_red))
bowl_samples_virtual</code></pre></div>
<table>
<caption><span id="tab:sample-prop-red-virtual">Table 2.4: </span>Virtual simulation: 10 sample proportions red based on samples of size 50</caption>
<thead>
<tr class="header">
<th align="right">replicate</th>
<th align="right">prop_red</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">0.34</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">0.36</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">0.40</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">0.38</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">0.36</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">0.30</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="right">0.36</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="right">0.38</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="right">0.26</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="right">0.46</td>
</tr>
</tbody>
</table>
<p>Compare Tables <a href="2-sampling.html#tab:sample-prop-red">2.2</a> and Table <a href="2-sampling.html#tab:sample-prop-red-virtual">2.4</a>; they are similar in output format and also the resulting <code>prop_red</code> are similar in values. Let’s plot this using the same histogram code as in Figure <a href="#sampling-distribution-1"><strong>??</strong></a>, but switching out <code>bowl_samples</code> for <code>bowl_samples_virtual</code>:</p>
<div class="figure" style="text-align: center"><span id="fig:sampling-distribution-virtual"></span>
<img src="ismaykim_files/figure-html/sampling-distribution-virtual-1.png" alt="Virtual simulation: 10 sample proportions red based on 10 samples of size 50" width="\textwidth" />
<p class="caption">
Figure 2.3: Virtual simulation: 10 sample proportions red based on 10 samples of size 50
</p>
</div>
<p>We’ve replicated the sampling distribution, but using simulated random samples, instead of the “in real life” random samples that our students collected in Table <a href="2-sampling.html#tab:students">2.1</a>. Let’s compute the center of this histogram and it’s standard deviation, which recall has a specific name: the standard error.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bowl_samples_virtual <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(prop_red), <span class="dt">sd =</span> <span class="kw">sd</span>(prop_red))</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">mean</th>
<th align="right">sd</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0.37</td>
<td align="right">0.052</td>
</tr>
</tbody>
</table>
</div>
<div id="extreme-virtual-sampling" class="section level2">
<h2><span class="header-section-number">2.4</span> “Extreme” virtual sampling</h2>
<p>Say we were feeling particularly unkind to Yaw and Drew and made them draw not 10 samples of size <span class="math inline">\(n\)</span> = 50, but TEN THOUSAND such samples. They would probably be at work for days! This is where computer simulations come really in handy: doing repetive and boring tasks quickly. To achieve this virtually, we just use same code as above but setting <code>reps = 10000</code>:</p>
<div class="figure" style="text-align: center"><span id="fig:sampling-distribution-virtual-2"></span>
<img src="ismaykim_files/figure-html/sampling-distribution-virtual-2-1.png" alt="Virtual simulation: Ten thousand sample proportions red based on ten thousand samples of size 50" width="\textwidth" />
<p class="caption">
Figure 2.4: Virtual simulation: Ten thousand sample proportions red based on ten thousand samples of size 50
</p>
</div>
<p>This distribution looks an awful lot like the normal distribution. That’s because is is the normal distribution! Let’s compute the center of this sampling distribution and the standard error again:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bowl_samples_virtual <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(prop_red), <span class="dt">sd =</span> <span class="kw">sd</span>(prop_red))</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">mean</th>
<th align="right">sd</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0.37</td>
<td align="right">0.052</td>
</tr>
</tbody>
</table>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC8.1)</strong> Repeat the above “extreme” virtual sampling exercise for 10,000 samples of size <span class="math inline">\(n\)</span> = 100. What do you notice is different about the histogram, i.e. the sampling distribution.</p>
<p><strong>(LC8.2)</strong> Repeat the above “extreme” virtual sampling exercise for 10,000 samples of size <span class="math inline">\(n\)</span> = 25. What do you notice is different about the histogram, i.e. the sampling distribution, when compared to the instances when the samples were of size <span class="math inline">\(n\)</span> = 50 and <span class="math inline">\(n\)</span> = 100.</p>
<p><strong>(LC8.3)</strong> Repeat the above “extreme” virtual sampling exercise for 10,000 samples of size <span class="math inline">\(n\)</span> = 50, but where the population is the <code>pennies</code> dataset in the <code>moderndive</code> package representing 800 pennies and where the population parameter of interest is the average year of minting of the 800 pennies. See the help file <code>?pennies</code> for more information about this dataset.</p>
<div class="learncheck">

</div>
</div>
<div id="central-limit-theorem" class="section level2">
<h2><span class="header-section-number">2.5</span> Central Limit Theorem</h2>
<p>What you have just shown in the previous is a very famous theorem, or mathematically proven truth, called the <em>Central Limit Theorem</em> which loosely states that when samples means and sample proportions are based on larger and larger samples, the sampling distribution corresponding to these point estimates get</p>
<ol style="list-style-type: decimal">
<li>More and more normal</li>
<li>More and more narrow</li>
</ol>
<p>Shuyi Chiou, Casey Dunn, and Pathikrit Bhattacharyya created the following 3m38s video explaining this crucial theorem to statistics using as examples, what else?</p>
<ol style="list-style-type: decimal">
<li>The average weight of wild bunny rabbits!</li>
<li>The average wing span of dragons!</li>
</ol>
<center>
<iframe width="800" height="450" src="https://www.youtube.com/embed/jvoxEYmQHNM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
</iframe>
</center>
</div>
<div id="conclusion" class="section level2">
<h2><span class="header-section-number">2.6</span> Conclusion</h2>
<div id="whats-to-come" class="section level3">
<h3><span class="header-section-number">2.6.1</span> What’s to come?</h3>
<p>This chapter serves as an introduction to theoretical underpinning of the statistical inference techniques that will be discussed in greater detail in Chapter <a href="#ci"><strong>??</strong></a> for confidence intervals and Chapter <a href="#hypo"><strong>??</strong></a> for hypothesis testing.</p>
</div>
<div id="script-of-r-code" class="section level3">
<h3><span class="header-section-number">2.6.2</span> Script of R code</h3>
<p>An R script file of all R code used in this chapter is available <a href="https://moderndive.netlify.com/scripts/08-sampling.R">here</a>.</p>

<div id="refs" class="references">
<div>
<p>Chihara, Laura M., and Tim C. Hesterberg. 2011. <em>Mathematical Statistics with Resampling and R</em>. Hoboken, NJ: John Wiley; Sons. <a href="https://sites.google.com/site/chiharahesterberg/home" class="uri">https://sites.google.com/site/chiharahesterberg/home</a>.</p>
</div>
<div>
<p>Diez, David M, Christopher D Barr, and Mine Çetinkaya-Rundel. 2014. <em>Introductory Statistics with Randomization and Simulation</em>. First Edition. <a href="https://www.openintro.org/stat/textbook.php?stat_book=isrs" class="uri">https://www.openintro.org/stat/textbook.php?stat_book=isrs</a>.</p>
</div>
<div>
<p>Grolemund, Garrett, and Hadley Wickham. 2016. <em>R for Data Science</em>. <a href="http://r4ds.had.co.nz/" class="uri">http://r4ds.had.co.nz/</a>.</p>
</div>
<div>
<p>Xie, Yihui. 2017. <em>Bookdown: Authoring Books and Technical Documents with R Markdown</em>. <a href="https://CRAN.R-project.org/package=bookdown" class="uri">https://CRAN.R-project.org/package=bookdown</a>.</p>
</div>
</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/moderndive/moderndive_book/edit/master/08-sampling.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
